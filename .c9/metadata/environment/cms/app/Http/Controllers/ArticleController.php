{"changed":true,"filter":false,"title":"ArticleController.php","tooltip":"/cms/app/Http/Controllers/ArticleController.php","value":"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse App\\Article;\nuse App\\Sample;\nuse App\\Http\\Requests;\nuse Auth;\n\nclass ArticleController extends Controller\n{\n  public function home()\n  {\n        $Article = Article::all();\n        $Article = Article::where('userid', Auth::id())->get();\n        // $Article = Article::where('userid', '2')->get();\n\n        // ここで、ユーザーIDの記事だけ表示させる処理を作る\n        // $Article = Article::orderBy('id', 'DESC')->take(7)->get();\n        $Sample = Sample::all();\n\n        $UID = Auth::id();\n\n        return view('/article', compact('Article','Sample','UID'));\n  }\n\n  public function list()\n  {\n        $Article = Article::all();\n        $Article = Article::where('userid', Auth::id())->get();\n        return view('article-list', compact('Article'));\n  }\n\n\n  public function create(Request $request)\n  {\n        $Article = new Article;\n        $Article->id = $request->id;\n        $Article->userid = $request->userid;\n        $Article->category = $request->category;\n        $Article->article = $request->article;\n        $Article->save();\n        return redirect('/user/article');\n  }\n\n    public function edit($id)\n    {\n        $Article = Article::find($id);\n        return view('/article-edit', ['Article'=>$Article ,'id'=>$id]);\n    }\n\n     public function update(Request $request)\n    {\n        $Article = Article::find($request->id);\n        $Article->userid = $request->userid;\n        $Article->category = $request->category;\n        $Article->article = $request->article;\n        $Article->update();\n        \n        return redirect('/user/article-list');\n    }\n\n\n    public function delete($id)\n    {\n        $Article = Article::find($id);\n        return view('/article-delete', ['Article'=>$Article ,'id'=>$id]);\n    }\n     public function deletepost(Request $request)\n    {\n        $Article = Article::find($request->id);\n        $Article->userid = $request->userid;\n        $Article->category = $request->category;\n        $Article->article = $request->article;\n        $Article->delete();\n        \n        return redirect('/user/article-list');\n    }\n\n\n    \n}\n","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":24,"column":22},"end":{"row":24,"column":28},"action":"insert","lines":["admin/"],"id":92}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":0},"end":{"row":3,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1567817386410}